<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <section class="section-center">
        <artticle class="gift-img">
            <img src="./gift.jpeg" alt="">
        </artticle>
        <article class="gift-info">
            <h3>Old Iphone GiveAway</h3>
            <h4 class="giveaway">giveaway ends on sunday, 2 Januari 2022, 8:30 AM</h4>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Modi ab nesciunt quod, recusandae, veritatis fuga odit eaque voluptates saepe ipsum iste quaerat autem dolor ipsam rem vel aut odio dignissimos vero, sed repudiandae dolores officiis.</p>

            <div class="deadline">
                <div class="deadline-format">
                    <div>
                        <h4 class="days">34</h4>
                        <span>days</span>
                    </div>
                </div>
                <div class="deadline-format">
                    <div>
                        <h4 class="hours">34</h4>
                        <span>hours</span>
                    </div>
                </div>
                <div class="deadline-format">
                    <div>
                        <h4 class="mins">34</h4>
                        <span>mins</span>
                    </div>
                </div>
                <div class="deadline-format">
                    <div>
                        <h4 class="secs">34</h4>
                        <span>secs</span>
                    </div>
                </div>
            </div>
        </article>
    </section>

    <script>
        const months = [
        'January',
        'February',
        'March',
        'April',
        'May',
        'June',
        'July',
        'August',
        'September',
        'October',
        'November',
        'December',
        ];
        const weekdays = [
        'Sunday',
        'Monday',
        'Tuesday',
        'Wednesday',
        'Thursday',
        'Friday',
        'Saturday',
        ];

        const giveaway = document.querySelector('.giveaway');
        const deadline = document.querySelector('.deadline');
        const items = document.querySelectorAll('.deadline-format h4');

        // menurut hari sekarang
        let tempDate = new Date();
        let tahun = tempDate.getFullYear();
        let bulan = tempDate.getMonth();
        let hari = tempDate.getDate();

        // let futureDate = new Date(2022, 0, 2, 8, 30,0);

        let futureDate = new Date(tahun, bulan , hari+3, 8, 30,0);
        console.log(futureDate);
        
        const years = futureDate.getFullYear();
        const date = futureDate.getDate();
        const days = futureDate.getDay();
        const month = futureDate.getMonth();
        const hours = futureDate.getHours();
        const mins = futureDate.getMinutes();
        const secs = futureDate.getSeconds();

        giveaway.textContent = `giveaway ends on ${weekdays[days]}, ${date} ${months[month]} ${years}, ${hours}:${mins} AM`

        //future Time in ms
        const futureTime = futureDate.getTime();
        console.log(futureTime);

        function getRemainingTime(){
            const today = new Date().getTime();
            // console.log(today);
            const t = futureTime-today;
            // 1s = 1000ms
            //1m = 60s
            //1hr = 60m
            //1d = 24hr
            // console.log(t);

            //value in ms
            const oneDay = 24*60*60*1000;
            const oneHour = 60*60*1000;
            const oneMinute = 60*1000;

            //calculate all values 
            let days = t/oneDay;
            days = Math.floor(days);

            // sisa dari hitung hari
            let hours = Math.floor((t % oneDay) / oneHour);
            let minutes = Math.floor((t % oneHour) / oneMinute);
            let seconds = Math.floor((t % oneMinute) / 1000);

            // console.log(days);
            // console.log(hours);
            // console.log(minutes);
            // console.log(seconds);

            const values = [days,hours,minutes,seconds];

            function format(item){
                if(item < 10 ){
                    return item = `0${item}`
                }
                    return item;
                
            }

            items.forEach(function(item,index){
                item.innerHTML = format(values[index]);
            })

            if (t<0){
                clearInterval(countdown);
                deadline.innerHTML = `<h4 class ="expired">Sorry, this giveaway expired</h4>`;
            }
        }

        let countdown = setInterval(getRemainingTime,100);
        // getRemainingTime();

    </script>
</body>
</html>