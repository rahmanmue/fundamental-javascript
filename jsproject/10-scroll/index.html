<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"/>
      <link rel="stylesheet" href="styles.css">
    <title>Scroll</title>
</head>
<body>
    
    <header id="home">
        <nav id="nav">
            <div class="nav-center">
                <div class="nav-header">
                    <img src="./logo.svg" class="logo" alt="">
                    <button class="nav-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                <div class="links-container">
                    <ul class="links">
                        <li><a href="#home" class="scroll-link">home</a></li>
                        <li><a href="#about" class="scroll-link">about</a></li>
                        <li><a href="#services" class="scroll-link">services</a></li>
                        <li><a href="#tours" class="scroll-link">tours</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- banner -->
        <div class="banner">
            <div class="container">
                <h1>Scroll Project</h1>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Porro quasi dolorum animi! Minus totam molestiae ipsam corporis provident accusamus doloremque!</p>
                <a href="#tours" class="scroll-link btn btn-white">explore tours</a>
            </div>
        </div>
    </header>

    <section id="about" class="section">
        <div class="title">
            <h2>About <span>us</span></h2>
        </div>
    </section>

    <section id="services" class="section">
        <div class="title">
            <h2>services <span>us</span></h2>
        </div>
    </section>

    <section id="tours" class="section">
        <div class="title">
            <h2>tours <span>us</span></h2>
        </div>
    </section>

    <footer class="section">
        <p>
            Coptright &copy; Backroad Travel Tours Company <span id="date">2020</span>. All Right Reserved
        </p>
    </footer>

    <a class="top-link scroll-link " href="#home">
        <i class="fas fa-arrow-up"></i>
    </a>


    <script>
       const date = document.getElementById('date');
       date.innerHTML= new Date().getFullYear();

       const navToggle = document.querySelector('.nav-toggle');
       const linksContainer = document.querySelector('.links-container');
       const links = document.querySelector('.links');

       navToggle.addEventListener('click', function(){
        linksContainer.classList.toggle('show-links');
        const containerHeight = linksContainer.getBoundingClientRect().height;
        const linksHeight = links.getBoundingClientRect().height;
        // console.log(containerHeight);
        // console.log(linksHeight);
        if(containerHeight === 0){
            linksContainer.style.height = `${linksHeight}px`;
        }else{
            linksContainer.style.height = 0;
        }
       });

    //    fixed navbar scroll
       const navbar = document.getElementById('nav');
       const toplink = document.querySelector('.top-link');
        window.addEventListener('scroll', function(){
            // console.log(window.pageYOffset);
            const scrollHeight = window.pageYOffset;
            const navHeight = navbar.getBoundingClientRect().height;

            if (scrollHeight > navHeight){
                navbar.classList.add('fixed-nav');
            }else{
                navbar.classList.remove('fixed-nav');
            }
            if (scrollHeight > 500){
                toplink.classList.add('show-link');
            }else{
                toplink.classList.remove('show-link');
            }
        });

    // scroll link
    const scrollLinks = document.querySelectorAll('.scroll-link');

    scrollLinks.forEach(function(link){
        link.addEventListener('click', function(e){
            e.preventDefault();

            const id = e.currentTarget.getAttribute('href').slice(1);
            const element = document.getElementById(id);

            // kalkulasi
            const navHeight = navbar.getBoundingClientRect().height;
            const containerHeight = linksContainer.getBoundingClientRect().height;
            const fixedNav = navbar.classList.contains('fixed-nav');
            let position = element.offsetTop - navHeight;
            console.log(element.getBoundingClientRect().height);
            console.log('ini posisi sebelum = '+ position);

            // untuk menggeser navbar karena about nav tidak ada
            if(!fixedNav){
                position = position - navHeight;
            }
            
            // untuk layar small
            if (navHeight > 82){
                // posisi sebelumnya ditambah tinggi container
                position = position + containerHeight;
            }

            console.log('navheight = '+navHeight);
            console.log('containerHeight = '+containerHeight);
            console.log('ini posisi sesudah = '+ position);

            // console.log(position);



            window.scrollTo({
                left:0,
                top:position
            });
            // menghilangkan navbar kebawah
            linksContainer.style.height = 0;

        });
    });

    </script>
</body>
</html>